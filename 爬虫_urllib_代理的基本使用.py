import urllib.request

url = 'http://www.baidu.com/s?wd=ip'

headers = {
    'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 ',
    'Cookie':'BIDUPSID=0916936403701592878DFFB27B6D0B2B; PSTM=1627558249; BDUSS=E9Eeml2c0dpMkNZVzB4TjRYfmVmQi1SaG83Zlg0Z3ltVG85bVgtYmp-UkJ4QnRsRVFBQUFBJCQAAAAAAQAAAAEAAAD0S1RVY2R1dGtzdwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEE39GRBN~RkZ; BDUSS_BFESS=E9Eeml2c0dpMkNZVzB4TjRYfmVmQi1SaG83Zlg0Z3ltVG85bVgtYmp-UkJ4QnRsRVFBQUFBJCQAAAAAAQAAAAEAAAD0S1RVY2R1dGtzdwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEE39GRBN~RkZ; H_WISE_SIDS=132548_216840_213348_214803_110085_244719_261722_236312_264480_265881_266368_267066_267072_266186_269020_259642_256151_269832_269904_256739_270460_264424_270547_271173_263618_256958_265034_271271_266027_271813_234296_234207_272284_267596_272456_270141_260335_273160_273164_273119_273144_273234_273300_272985_273400_273394_273460_273476_272640_271147_273670_264170_270186_272263_273806_274078_273958_274139_274206_273786_273043_273595_272694_274300_272562_274440_274572_274765_274759_274821_274853_274857_274847_270158_275070_275096_267806_267547_273922_275167_274335_275148_272332_272317_274866_271157_274975_275771_270365_273491_275791_275004_275941_275850_275970_274785_274079_276089_269610_276121_275915_276250_276196_276312_276342_275170_276421_276447_276520_275460_276586_273520_276633_275589; H_WISE_SIDS_BFESS=132548_216840_213348_214803_110085_244719_261722_236312_264480_265881_266368_267066_267072_266186_269020_259642_256151_269832_269904_256739_270460_264424_270547_271173_263618_256958_265034_271271_266027_271813_234296_234207_272284_267596_272456_270141_260335_273160_273164_273119_273144_273234_273300_272985_273400_273394_273460_273476_272640_271147_273670_264170_270186_272263_273806_274078_273958_274139_274206_273786_273043_273595_272694_274300_272562_274440_274572_274765_274759_274821_274853_274857_274847_270158_275070_275096_267806_267547_273922_275167_274335_275148_272332_272317_274866_271157_274975_275771_270365_273491_275791_275004_275941_275850_275970_274785_274079_276089_269610_276121_275915_276250_276196_276312_276342_275170_276421_276447_276520_275460_276586_273520_276633_275589; BAIDUID=30D4C7DDC91E0A07164BE36E59DB7E18:FG=1; MCITY=-186%3A; H_PS_PSSID=39996_40043_40077_40135; BD_UPN=12314753; BDORZ=FFFB88E999055A3F8A630C64834BD6D0; BA_HECTOR=812lag818l0l2h24al8520a5ntggvn1iqpnfd1t; BAIDUID_BFESS=30D4C7DDC91E0A07164BE36E59DB7E18:FG=1; ZFY=BvqqmRK:BzshVp7YAKB2SJNtZcnn8cE7U8NocS5U4VYg:C; BDRCVFR[V3EOV_cRy1C]=mk3SLVN4HKm; BD_CK_SAM=1; PSINO=1; B64_BOT=1; ab_sr=1.0.1_OTRlOTQxNmNhMmY5MGNiYWY3ZmZlM2U4ZjA2OTAxZjNjZGJjODQzZWQxNDIyYjkxYzFhNGYyYmZhYzAxNGEwNzIwOTY1MjMyNjBhYjRjYzg2NmRlNWVmMTJlZjAwYTA3MWE0MTcyODUzZmY3Y2ZiMjgxZDJkMDc1OTljZTMxZDgxOTA1OTVjYzczNTU1NzQ1ZTZiY2JjODliOGE1ZDQxYQ==; delPer=0; shifen[258609485587_83413]=1705831418; BCLID=10803949342089030991; BCLID_BFESS=10803949342089030991; BDSFRCVID=LuIOJeC62CjlTlJqGyaduxB80RN1TM6TH6aoG6wJMlobMr5hf-mYEG0PEf8g0KubJ2MRogKKXgOTHw0F_2uxOjjg8UtVJeC6EG0Ptf8g0f5; BDSFRCVID_BFESS=LuIOJeC62CjlTlJqGyaduxB80RN1TM6TH6aoG6wJMlobMr5hf-mYEG0PEf8g0KubJ2MRogKKXgOTHw0F_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF=tJ4toCPMJI_3fP36q4Rh-tFO-frQaC62aKDs2P5YBhcqEIL4LP6S3-ApKtJ8543tMguOoUoktxbYMxbSj4QoQTKWy4cQ2-ju-JT30j6Eyl5nhMJHb67JDMP0-4CHWljy523ihn3vQpnbhhQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xb6_0-nDSHH8eJjLe3f; H_BDCLCKID_SF_BFESS=tJ4toCPMJI_3fP36q4Rh-tFO-frQaC62aKDs2P5YBhcqEIL4LP6S3-ApKtJ8543tMguOoUoktxbYMxbSj4QoQTKWy4cQ2-ju-JT30j6Eyl5nhMJHb67JDMP0-4CHWljy523ihn3vQpnbhhQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xb6_0-nDSHH8eJjLe3f; H_PS_645EC=c592o%2FYaAsaKBYh44C9ft3QakX0a2isjvf3Gu%2FcxpR0TfvU7HfArMEG%2FQq11wgz8k18n5A8; COOKIE_SESSION=220_1_4_5_7_3_0_0_3_2_0_0_694_0_0_0_1705827823_1705831419_170583'
}

# 请求对象的定制
request = urllib.request.Request(url=url,headers=headers)

# 模拟浏览器访问服务器
# response = urllib.request.urlopen(request)

proxies = {
    'http':'182.207.12.32:18070'
}

# handler  build_opener  open
handler = urllib.request.ProxyHandler(proxies=proxies)

opener = urllib.request.build_opener(handler)

response = opener.open(request)


# 获取响应信息
content = response.read().decode('utf-8')
print(content)

# 保存本地
with open('代理2.html','w',encoding='utf-8') as fp:
    fp.write(content)